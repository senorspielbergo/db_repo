<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE xhtml>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p ="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    
    <h:body>
        <ui:composition template="templates/template.xhtml">
            
            <ui:define name="content">
                <h:form>
                    <p:panelGrid columns="2" style="width:100%">
                        <p:outputLabel value="Wählen Sie einen Wahlkreis: "/>
                        <p:selectOneMenu value="#{singleAnalysisBean.selectedDistrict}">
                            <f:converter binding ="#{districtConverter}" />
                            <f:selectItems value="#{singleAnalysisBean.districts}" var="dist" itemValue="#{dist}" itemLabel="#{dist.name}"/>
                            <p:ajax event="change" listener="#{singleAnalysisBean.onDistrictSelection}" update="@form"/>
                        </p:selectOneMenu>
                    </p:panelGrid>
                    <h:outputText value="Bitte beachten Sie: Die Analysen auf dieser Seite werden auf Einzelstimmen ausgeführt. Daher können diese etwas länger dauern, als
                                  Sie es von Wahlinfo 3000 gewohnt sind. Vielen Dank für ihr Verständnis!" style="font-weight: bold"/>
                    <p:separator/>
                    <h:panelGrid columns="3" cellpadding="5" style="width:100%; ">    
                        
                        <p:outputPanel>
                            <h:outputText value="Wahlkreis" style='width:100%; align-content: center'/>
                            <h:panelGrid columns="2" cellpadding="5">
                                
                                
                                <h:outputText value="Name:" />
                                <h:outputText value="#{singleAnalysisBean.selectedDistrict.name}" style="font-weight: bold"/>
                                
                                <h:outputText value="Id:" />
                                <h:outputText value="#{singleAnalysisBean.selectedDistrict.id}" style="font-weight: bold"/>

                                <h:outputText value="Bundesland:" />
                                <h:outputText value="#{singleAnalysisBean.selectedDistrict.bundesland}" style="font-weight: bold"/>
                                
                                <h:outputText value="Wahlberechtigte:" />
                                <h:outputText value="#{singleAnalysisBean.selectedDistrict.wahlberechtigte}" style="font-weight: bold"/>
                                
                                <h:outputText value="Wahlbeteiligung:" />
                                <h:outputText value="#{singleAnalysisBean.selectedDistrict.wahlbeteiligung} %" style="font-weight: bold"/>
                            </h:panelGrid>
                        </p:outputPanel>
                 
                        <p:outputPanel>
                            <h:outputText value="Direktkandidat" style='width:100%; align-content: center'/>
                            <h:panelGrid columns="2" cellpadding="5">
                                
                                
                                <h:outputText value="Name:" />
                                <h:outputText value="#{singleAnalysisBean.selectedDistrict.direktKandidat.title} #{singleAnalysisBean.selectedDistrict.direktKandidat.name}" style="font-weight: bold"/>
                                
                                <h:outputText value="Partei:" />
                                <h:outputText value="#{singleAnalysisBean.selectedDistrict.direktKandidat.party}" style="font-weight: bold"/>
                                
                                <h:outputText value="Stimmen:" />
                                <h:outputText value="#{singleAnalysisBean.selectedDistrict.direktKandidat.votes}" style="font-weight: bold"/>
                                
                            </h:panelGrid>
                        </p:outputPanel>
                        
                    
                    </h:panelGrid>
                    
                    <p:separator/>
                        <p:dataTable var="party" value="#{singleAnalysisBean.selectedDistrict.parties}"
                                     lazy="true"
                                     scrollable="true"
                                     scrollHeight="700">

                            <p:column headerText="Partei">
                                <h:outputText value="#{party.name}" />
                            </p:column>

                            <p:column headerText="Absolute Stimmen">
                                <h:outputText value="#{party.totalVotes}" />
                            </p:column>

                            <p:column headerText="Stimmenanteil in %">
                                <h:outputText value="#{party.percentage}" />
                            </p:column>
                        </p:dataTable>
                    <p:separator/>
                    
                    <p:dataTable var="history" value="#{singleAnalysisBean.selectedDistrict.histories}"
                                     lazy="true"
                                     scrollable="true"
                                     scrollHeight="700">
                            <f:facet name="header">
                                <p:outputLabel value="Wahlentwicklungen zu vorheriger Wahl" style='font-weight: bold'/>
                            </f:facet>
                                     
                            <p:column headerText="Partei">
                                <h:outputText value="#{history.party}" />
                            </p:column>

                            <p:column headerText="Erststimmendifferenz">
                                <h:outputText value="#{history.diffFirstVote}" />
                            </p:column>

                            <p:column headerText="in Pozent">
                                <h:outputText value="#{history.diffFirstVotePc}" />
                            </p:column>
                            
                            <p:column headerText="Zweitstimmendifferenz">
                                <h:outputText value="#{history.diffSecondVote}" />
                            </p:column>
                            
                            <p:column headerText="in Pozent">
                                <h:outputText value="#{history.diffSecondVotePc}" />
                            </p:column>
                            
                        </p:dataTable>
                    
                </h:form>
            </ui:define>
            
        </ui:composition>
    </h:body>
</html>
